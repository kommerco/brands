<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="sale_order_form_inherit_view" model="ir.ui.view">
            <field name="name">sale.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                  <xpath expr="//field[@name='order_line']/tree[1]/field[@name='product_uom']" position="after">
                        <field name="unit_box" string="Pza/Cja" optional="show"/>
                        <field name="has_wrong_boxes" attrs="{}" invisible="1"/>
                        <field name="subtotal_box" optional="show" string="Cajas" decoration-danger="has_wrong_boxes == True"/>
                  </xpath>
                  <xpath expr="//field[@name='amount_untaxed']" position="before">
                    <field name="total_box" string="Total Cajas"/>
                  </xpath>
            </field>
        </record>

        <!-- Create report Sale Order Document -->
        <template id="report_saleorder_document_inherit" inherit_id="sale.report_saleorder_document">
          <xpath expr="/t/t/div/table" position="after">
            <div class="row">
              <div class="col">
                <span t-field="doc.total_box"/>
              </div>
            </div>
          </xpath>
          <xpath expr="/t[1]/t[1]/div[1]/div[3]/div[1]" position="replace"/>
          <xpath expr="/t/t/div/table/thead/tr/th[2]" position="after">
            <th>
              <span>Pza/Cja</span>
            </th>
          </xpath>
          <xpath expr="/t/t/div/table/tbody/t[2]/tr/t[1]/td[2]" position="after">
            <td class="text-center">
              <span t-field="line.unit_box"/>
            </td>
          </xpath>
          <xpath expr="/t/t/div/table/tbody/t[2]/t[3]/tr/td" position="attributes">
            <attribute name="colspan">100</attribute>
          </xpath>
          <xpath expr="/t/t/div/table/thead/tr/th[3]" position="after">
            <th>
              <span>Cajas</span>
            </th>
          </xpath>
          <xpath expr="/t/t/div/table/tbody/t[2]/tr/t[1]/td[3]" position="after">
            <td class="text-center">
              <span t-field="line.subtotal_box"/>
            </td>
          </xpath>
          <xpath expr="/t/t/div/table/tbody/t[2]/t[3]/tr/td" position="attributes">
            <attribute name="colspan">101</attribute>
          </xpath>
          <xpath expr="/t/t/div/div[3]" position="after">
            <div class="row">
              <div class="col-3"/>
              <div class="col-3"/>
              <div class="col-3">
                <span>
                  <strong>Total Cajas:</strong>
                  <br/>
                  <span t-field="doc.total_box"/>
                </span>
              </div>
              <div class="col-3"/>
            </div>
          </xpath>
          <xpath expr="/t/t/div/div[4]/div[3]" position="attributes">
            <attribute name="style" separator=";" add="margin-right:50px"/>
          </xpath>
          <xpath expr="/t/t/div/div[4]/div[3]" position="attributes">
            <attribute name="style" separator=";" add="margin-right:150px" remove="margin-right:50px"/>
          </xpath>
          <xpath expr="/t/t/div/div[4]/div[3]" position="attributes">
            <attribute name="style" separator=";" add="margin-right:0px" remove="margin-right:50px"/>
          </xpath>
          <xpath expr="/t/t/div/div[4]/div[3]" position="attributes">
            <attribute name="style" separator=";" remove="margin-right:50px"/>
          </xpath>
        </template>

        <!-- Create report Quotation Inherit -->
        <template id="report_purchasequotation_document_inherit" inherit_id="purchase.report_purchasequotation_document">
              <xpath expr="/t/t/div/table/thead/tr/th[3]" position="after">
                <th>
                  <span>Unit Box</span>
                </th>
              </xpath>
              <xpath expr="/t/t/div/table/tbody/t/tr/t[1]/td[3]" position="after">
                <td class="text-center">
                  <span t-field="order_line.unit_box"/>
                </td>
              </xpath>
              <xpath expr="/t/t/div/table/thead/tr/th[4]" position="after">
                <th>
                  <span>Subtotal Box</span>
                </th>
              </xpath>
              <xpath expr="/t/t/div/table/tbody/t/tr/t[1]/td[4]" position="after">
                <td class="text-center">
                  <span t-field="order_line.subtotal_box"/>
                </td>
              </xpath>
              <xpath expr="/t/t/div/div[2]" position="after">
                <div class="row">
                  <div class="col-3"/>
                  <div class="col-3"/>
                  <div class="col-3"/>
                  <div class="col-3">
                    <span>
                      <strong>Total Box:</strong>
                      <br/>
                      <span t-field="o.total_box"/>
                    </span>
                  </div>
                </div>
              </xpath>
        </template>
    </data>
</odoo>